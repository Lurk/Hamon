{% import "components/common.html" as common %}
{% import "components/yamd.html" as yamd %}

{% extends "base.html" %}
{% block og_image %}{% set page= get_page_by_path( path = config.template_config.index_post  ) %}{{ get_image_url(src = page.content.metadata.image, width = 1012, height = 682) | safe }}{% endblock %}
{% block og_url %}{{ config.domain }}{% endblock %}
{% block content %}
  <div class="post">
    <div 
      class="img head" 
      style="background-image: url('{{ get_image_url(src = page.content.metadata.image, width = 1012, height = 682) | safe }}')"
    >
      <div>
        <h1>{{ page.content.metadata.title }}</h1>
      </div>
    </div>
    {{ yamd::yamd(nodes=page.content.nodes) }}
  </div>
  {% for tag in config.template_config.index_tags %}
    <h2>{{ tag | capitalize }}:</h2>
    <div class="grid">
      {% set slice = get_pages_by_tag(tag = tag, limit = 3, offset = 0) %}
      {% for page in  slice.pages %}
        {% include "components/post_card.html" %}
      {% endfor %}
    </div>
  {% endfor %}
  <div class="spacer"></div>
{% endblock %}


