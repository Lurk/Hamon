{% extends "base.html" %}
{% import "components/common.html" as common %} 
{% block og_image %}{% endblock %}
{% block og_url %}{{ config.domain }}{% endblock %}
{% block content %}
  <h1>All posts with tag: {{ title }}</h1>
  {% set page = get_posts_by_tag(tag = title, limit = 9, offset = page_num * 9) %}
  <div class="grid">
  {% for post in  page.posts %}
    {% include "components/post_card.html" %}
  {% endfor %}
  </div>
  {%- if page.numbers | length > 1 -%}
  <div class="pagination">
  {%- for num in page.numbers %}
    {%- if num.is_current %}
      <div class="current">
      {{ num.display }}
      </div>
    {%- else %}
      {%- if num.number == 0 %}
        <div>
        {{ common::local_page(
          path='/tag/' ~ title ~ '.html', 
          template="tag.html", 
          text=num.display, 
          title=title, 
          description='all posts with tag: ' ~ title, 
          page_num=num.number
        ) }}
        </div>
      {%- else %}
        <div>
        {{ common::local_page(
          path='/tag/' ~ title ~ '/' ~ num.display ~ '.html', 
          template="tag.html", 
          text=num.display, 
          title=title, 
          description='all posts with tag: ' ~ title ~ ' page ' ~ num.display, 
          page_num=num.number
        ) }}
        </div>
      {%- endif %}
    {%- endif %}
  {%- endfor %}
  </div>
  {%- endif %}
{% endblock %}
